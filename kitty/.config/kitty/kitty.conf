# ==============================================================================
# VISUALS & FONTS (Kept from your original config)
# ==============================================================================
font_family      JetBrainsMono Nerd Font Noto Sans CJK JP
font_size        13.0
bold_font        auto
italic_font      auto
bold_italic_font auto

window_padding_width    0
hide_window_decorations yes
background_opacity      0.85
dynamic_background_opacity yes
confirm_os_window_close 0

cursor_trail 10
cursor_trail_start_threshold 0
shell_integration no-cursor
cursor_trail_decay 0.01 0.15
cursor_shape block
cursor_blink true

# Tokyo Night Theme (Load from the git clone or uncomment manual colors below)
include ./kitty-themes/themes/Tokyo_Night.conf

# ==============================================================================
# LAYOUT & WINDOWS (Replaces Tmux Splits)
# ==============================================================================
# 'Splits' layout allows arbitrary horizontal/vertical splits like Tmux
enabled_layouts splits,stack

# Draw a border around the active window (like Tmux active pane)
window_border_width 2.0
active_border_color #7aa2f7
inactive_border_color #292e42

# Tab Bar (Replaces Tmux Status Bar)
tab_bar_edge top
tab_bar_style powerline
tab_powerline_style slanted
active_tab_foreground   #1d2021
active_tab_background   #7aa2f7
active_tab_font_style   bold
inactive_tab_foreground #a9b1d6
inactive_tab_background #1f2335
inactive_tab_font_style normal

# ==============================================================================
# KEYBINDINGS (Mapped to match your Tmux Config)
# ==============================================================================

# --- Mod Key ---
# We will use 'alt' directly, no need for a "Prefix" (C-Space) in Kitty.

# --- Reload Config (Tmux: bind r) ---
map alt+r load_config_file

# --- Window/Pane Management ---

# Kill Pane (Tmux: bind M-x kill-pane)
map alt+x close_window

# Kill Window/Tab (Tmux: bind M-X kill-window)
map alt+shift+x close_tab

# New Window/Tab (Tmux: bind M-n)
# --cwd=current ensures it opens in the same folder
map alt+n new_tab_with_cwd

# Split Window (Tmux: bind M-v split-window -h)
# In Kitty, 'vsplit' puts windows side-by-side (vertical line)
map alt+v launch --location=vsplit --cwd=current

# Horizontal Split (You had M-s commented out, but here it is just in case)
map alt+s launch --location=hsplit --cwd=current

# Zoom Pane (Tmux: bind M-z)
# This toggles the 'stack' layout which maximizes the current window
map alt+z toggle_layout stack

# --- Navigation ---

# Previous/Next Tab (Tmux: bind M-a / M-d)
map alt+a previous_tab
map alt+d next_tab

# Switch focus between panes (Like vim-tmux-navigator)
map alt+h neighboring_window left
map alt+l neighboring_window right
map alt+k neighboring_window up
map alt+j neighboring_window down

# --- Resizing (Tmux: bind M-H/J/K/L) ---
map alt+shift+h resize_window narrower
map alt+shift+l resize_window wider
map alt+shift+k resize_window taller
map alt+shift+j resize_window shorter

# --- Session Management ---

# New OS Window (Tmux: bind M-N new-session)
# Kitty calls separate windows "OS Windows"
map alt+shift+n new_os_window_with_cwd

# Rename Tab (Tmux: bind M-$)
map alt+shift+r set_tab_title

# --- Scrolling / Copy Mode ---
# Kitty has native scrolling.
# Use Ctrl+Shift+h to view scrollback buffer in a pager (like 'less')
map ctrl+shift+h show_scrollback

# ==============================================================================
# ADVANCED SETTINGS
# ==============================================================================
# Allow remote control (needed for some scripts/plugins)
allow_remote_control yes
listen_on unix:@kitty-{kitty_pid}
